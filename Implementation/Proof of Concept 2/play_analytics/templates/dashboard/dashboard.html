{% extends 'base.html' %}
{% block content %}
<h2>Dashboard</h2>

<div class="row mb-4">
  <div class="col-md-4"><strong>Total Players:</strong> {{ total_players }}</div>
  <div class="col-md-4"><strong>Avg Age:</strong> {{ avg_age }}</div>
  <div class="col-md-4"><strong>Avg Injuries:</strong> {{ avg_injuries }}</div>
</div>

<canvas id="injuryPieChart"></canvas>
<canvas id="injuryBarChart" class="mt-5"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const pieCtx = document.getElementById('injuryPieChart');
  new Chart(pieCtx, {
    type: 'pie',
    data: {
      labels: {{ pie_labels|safe }},
      datasets: [{
        data: {{ pie_values|safe }},
        backgroundColor: ['#ff9999','#66b3ff','#99ff99','#ffcc99','#c2c2f0']
      }]
    }
  });

  const barCtx = document.getElementById('injuryBarChart');
  new Chart(barCtx, {
    type: 'bar',
    data: {
      labels: {{ bar_labels|safe }},
      datasets: [{
        label: 'Avg Injuries',
        data: {{ bar_values|safe }},
        backgroundColor: 'tomato'
      }]
    }
  });
</script>
{% endblock %}
